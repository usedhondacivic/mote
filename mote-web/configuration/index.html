<html>

<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <link rel="stylesheet" href="styles/third_party.css">
    <link rel="stylesheet" href="styles/index.css">

    <title>Mote Configuration</title>
</head>

<body>
    <script type="module">
        import init, {ConfigurationLink} from './pkg/configuration.js';

        async function run() {
            await init();
            let link = new ConfigurationLink();
            link.send(
                {
                    SetUID: {
                        uid: "testing"
                    }
                });
        }

        run();
    </script>

    <h1 style="margin-bottom: 0px;">Hello!</h1>
    <p>Welcome to the Mote configuration page. You can use this website to edit settings, connect your robot to WiFi,
        and run diagnostics.</p>
    <p>To start, connect your robot to your computer using USB. Then click connect.</p>

    <div class="grid">
        <p style="flex-basis: auto;"><span style="color: salmon">Mote Not Connected</span> | </p>
        <div style="display: flex; justify-content: center; flex-grow: 1;">
            <button style="margin-top: -1ch;">Connect</button>
        </div>
        <p style="flex-basis: auto;"> | <span style="color: salmon">Last Updated: Never</span></p>
    </div>
    <p id="alert" hidden><b>Update requires Mote to reboot. Page will reload in 3 seconds...</b></p>

    <h2>Identification</h2>

    <p>MAC address: 00:1A:2B:3C:4D:5E</p>
    <label for="uid">Unique identifier:</label>
    <div class="grid">
        <input id="uid" type="text" name="unique_id" value="some_unique_id" oninput="uid_updated()"
            style="flex-grow: 1;">
        <button id="uid_submit" onclick="await uid_submit()" style="flex-basis: auto;">Update</button>
    </div>


    <h2>Connectivity</h2>

    <p>Click on a network to connect.</p>

    <ul class="tree">
        <p style="margin: 0px;"><strong>Detected Networks</strong></p>
        <ul>
            <li>
                <p style="margin: 0px;"><span style="color: lightgreen">Placeholder SSID</span> &lt;- Currently
                    connected!</p>
                <ul>
                    <li>Strength: </li>
                    <li>Security: </li>
                </ul>
            </li>
            <li>
                <p style="margin: 0px;"><a>Placeholder SSID</a></p>
                <ul>
                    <li>Strength: </li>
                    <li>Security: </li>
                </ul>
            </li>
            <li>
                <p style="margin: 0px;"><a>Placeholder SSID</a></p>
                <ul>
                    <li>Strength: </li>
                    <li>Security: </li>
                </ul>
            </li>
        </ul>
    </ul>

    <div class="grid">
        <input type="text" name="password" placeholder="Network password.." style="flex-grow: 1;">
        <button style="flex-basis: auto;">Connect</button>
    </div>
    <button>Rescan</button>

    <h2>Diagnostics</h2>
    <p>Tests are run on startup. Reboot Mote to refresh.</p>
    <ul class=" tree">
        <p style="margin: 0px;"><strong>Subsystems</strong></p>
        <ul>
            <li>
                <p style="margin: 0px;">WiFi</p>
                <ul>
                    <li>Connected <span style="color: lightgreen">✓</span></li>
                </ul>
            </li>
            <li>
                <p style="margin: 0px;">LiDAR</p>
                <ul>
                    <li>Enable <span style="color: salmon">✖</span> </li>
                    <li>Read Data <span style="color: salmon">✖</span></li>
                </ul>
            </li>
            <li>
                <p style="margin: 0px;">IMU</p>
                <ul>
                    <li>Enable <span style="color: lightgreen">✓</span></li>
                    <li>Read Data <span style="color: lightgreen">✓</span></li>
                </ul>
            </li>
        </ul>
    </ul>
</body>

</html>
